!function(e){e.plugin(function(e,t,a,n,r){var o={uniqueIdPrefix:"snapsvg-zpd-",dataStore:{}},i=function y(e){if(e.parentElement){for(;e.firstChild;)e.parentElement.insertBefore(e.firstChild,e);e.parentElement.removeChild(e)}},s=function x(e,t){return void 0===t?parseInt(e):"+"==t[0]?e+parseInt(t.split("+")[1]):"-"==t[0]?e-parseInt(t.split("-")[1]):parseInt(t)},d=function w(e,t,a){if(a&&"object"==typeof a){if(t.a<=a[0])return;if(t.d>=a[1])return}var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)},u=function M(e){var t="[ "+e.a+", "+e.c+", "+e.e+"\n  "+e.b+", "+e.d+", "+e.f+"\n  0, 0, 1 ]";return t},l=function b(e,t){var a=t.node.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a},f=function C(e,t){var a=e.node.childNodes,n=e.g(),r=n.node;if(r.id=o.uniqueIdPrefix+e.id,t.load&&"object"==typeof t.load){var i=t.load,s="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";n.transform(s)}else n.transform("matrix");for(var d=0,u=a.length-1;u>d;)r.appendChild(a[0]),d+=1;var l={svg:e,root:e.node,state:"none",stateTarget:null,stateOrigin:null,stateTf:null},f={element:n,data:l,options:t};return f.handlerFunctions=m(f),f},m=function S(e){$(document).on("mouseup",function(){e.data.state="none"});var t=function o(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1,("pan"==e.data.state||"drag"==e.data.state)&&(e.data.state="")},a=function i(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1;var a=e.element.node;"svg"!=t.target.tagName&&e.options.drag?(e.data.state="drag",e.data.stateTarget=t.target,e.data.stateTf=a.getCTM().inverse(),e.data.stateOrigin=l(t,e.data.svg).matrixTransform(e.data.stateTf)):(e.data.state="pan",e.data.stateTf=a.getCTM().inverse(),e.data.stateOrigin=l(t,e.data.svg).matrixTransform(e.data.stateTf))},n=function s(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1;var a=e.element.node;if("pan"==e.data.state&&e.options.pan){var n=l(t,e.data.svg).matrixTransform(e.data.stateTf),r=n.x-e.data.stateOrigin.x,o=n.y-e.data.stateOrigin.y,i=e.element.parent(),s=e.element;d(a,e.data.stateTf.inverse().translate(r,o))}else if("drag"==e.data.state&&e.options.drag){var u=l(t,e.data.svg).matrixTransform(a.getCTM().inverse());d(e.data.stateTarget,e.data.root.createSVGMatrix().translate(u.x-e.data.stateOrigin.x,u.y-e.data.stateOrigin.y).multiply(a.getCTM().inverse()).multiply(e.data.stateTarget.getCTM())),e.data.stateOrigin=u}},r=function u(t){if(e.options.zoom){t.preventDefault&&t.preventDefault(),t.returnValue=!1;var a=0;a=t.wheelDelta?t.wheelDelta/360:t.detail/-9;var n=Math.pow(1+e.options.zoomScale,a),r=e.element.node,o=l(t,e.data.svg);o=o.matrixTransform(r.getCTM().inverse());var i=e.data.root.createSVGMatrix().translate(o.x,o.y).scale(n).translate(-o.x,-o.y);d(r,r.getCTM().multiply(i),e.options.zoomThreshold),"undefined"==typeof stateTf&&(e.data.stateTf=r.getCTM().inverse()),e.data.stateTf=e.data.stateTf.multiply(i.inverse())}};return{mouseUp:t,mouseDown:a,mouseMove:n,mouseWheel:r}},v=function O(e,t){"onmouseup"in document.documentElement&&(e.addEventListener("mouseup",t.mouseUp,!1),e.addEventListener("mousedown",t.mouseDown,!1),e.addEventListener("mousemove",t.mouseMove,!1),navigator.userAgent.toLowerCase().indexOf("webkit")>=0||navigator.userAgent.toLowerCase().indexOf("trident")>=0?e.addEventListener("mousewheel",t.mouseWheel,!1):e.addEventListener("DOMMouseScroll",t.mouseWheel,!1))},p=function D(e,t){e.removeEventListener("mouseup",t.mouseUp,!1),e.removeEventListener("mousedown",t.mouseDown,!1),e.removeEventListener("mousemove",t.mouseMove,!1),navigator.userAgent.toLowerCase().indexOf("webkit")>=0||navigator.userAgent.toLowerCase().indexOf("trident")>=0?e.removeEventListener("mousewheel",t.mouseWheel,!1):e.removeEventListener("DOMMouseScroll",t.mouseWheel,!1)},c=function(e,t){var a=this,n={pan:!0,zoom:!0,drag:!1,zoomScale:.2,zoomThreshold:null},r,s={init:"init",reinit:"reinit",destroy:"destroy",save:"save",origin:"origin",callback:"callback"},d=null;if("function"==typeof e&&(t=e,r=s.callback),o.dataStore.hasOwnProperty(a.id))if(d=o.dataStore[a.id],"object"==typeof e){for(var u in e)d.options[u]=e[u];r=s.reinit}else"string"==typeof e&&(r=e);else{if("object"==typeof e){for(var l in e)n[l]=e[l];r=s.init}else"string"==typeof e&&(r=e);d=f(a,n),v(a.node,d.handlerFunctions),o.dataStore[a.id]=d}switch(r){case s.init:case s.reinit:case s.callback:return void(t&&t(null,d));case s.destroy:return p(a.node,d.handlerFunctions),i(a.node.firstChild),delete o.dataStore[a.id],void(t&&t(null,d));case s.save:var m=document.getElementById(o.uniqueIdPrefix+a.id),c=m.getCTM();return t&&t(null,c),c;case s.origin:return a.zoomTo(1,1e3),void(t&&t(null,d))}},g=function(t,a,n,r,i){if(0>t||"number"!=typeof t)return void console.error("zoomTo(arg) should be a number and greater than 0");"number"!=typeof a&&(a=3e3);var s=this;if(o.dataStore.hasOwnProperty(s.id)){var d=o.dataStore[s.id].element,u=(new e.Matrix).scale(t),l=i.offset_x,f=i.offset_y,m=i.c_w*t,v=i.c_h*t,p=i.vp_w,c=i.vp_h,g=(m-p)/2,h=(v-c)/2;u.e=-g+l,u.f=-h+f,d.animate({transform:u},a,n||null,function(){r&&r(null,d)})}},h=function(e,t,a,n,r){var i=this;if(o.dataStore.hasOwnProperty(i.id)){var d=o.dataStore[i.id].element,u=d.node.getCTM(),l=s(u.e,e),f=s(u.f,t),m="matrix("+u.a+","+u.b+","+u.c+","+u.d+","+l+","+f+")";d.animate({transform:m},a||10,n||null,function(){r&&r(null,d)})}},T=function(t,a,n,r,i,s){var d=this;if(o.dataStore.hasOwnProperty(d.id)){var u=o.dataStore[d.id].element,l=u.node.getCTM(),f="matrix("+l.a+","+l.b+","+l.c+","+l.d+","+l.e+","+l.f+")";a&&"number"==typeof a||(a=d.node.offsetWidth/2),n&&"number"==typeof n||(n=d.node.offsetHeight/2),u.animate({transform:new e.Matrix(l).rotate(t,a,n)},r||10,i||null,function(){s&&s(null,u)})}};a.prototype.zpd=c,a.prototype.zoomTo=g,a.prototype.panTo=h,a.prototype.rotate=T})}(Snap);