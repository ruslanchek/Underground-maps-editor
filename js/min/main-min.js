var m;$(function(){function t(t){for(var a=[],n=0;n<e.length;n++){var o=e[n];o.id!=t.id&&a.push(o)}e=a,i.set("stations",e)}function a(t){for(var a=!1,n=0;n<e.length;n++){var o=e[n];o.id==t.id&&(a=!0)}a||e.push(t),i.set("stations",e)}$(".container, .map").css({width:can_w,height:can_h});var e=[],i=new Ractive({el:"#stations",template:"#template",data:{stations:e}});m=new iMap.Map({target_id:"map",map_svg:mapSvg,data_url:dataJson,viewport_width:can_w,viewport_height:can_h,map_width:map_w,map_height:map_h,offset_x:offset_x,offset_y:offset_y,min_zoom:.68,onStationSelect:function(t,e,i){i||a(t.getData())},onStationUnselect:function(a,e,i){i||t(a.getData())}}),m.init(),$(".zoomer").on("click",function(t){t.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),m.zoomIn()):($(this).addClass("active"),m.zoomOut())})});