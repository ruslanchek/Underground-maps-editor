var m;$(function(){function t(t){for(var a=[],e=0;e<i.length;e++){var o=i[e];o.id!=t.id&&a.push(o)}i=a,n.set("stations",i)}function a(t){for(var a=!1,e=0;e<i.length;e++){var o=i[e];o.id==t.id&&(a=!0)}a||i.push(t),n.set("stations",i)}$(".container, .map").css({width:can_w,height:can_h});var i=[],n=new Ractive({el:"#stations",template:"#template",data:{stations:i}});m=new iMap.Map({target_id:"map",map_svg:mapSvg,data_url:dataJson,viewport_width:can_w,viewport_height:can_h,map_width:map_w,map_height:map_h,min_zoom:.68,onStationSelect:function(t,i,n){n||a(t.getData())},onStationUnselect:function(a,i,n){n||t(a.getData())}}),m.init(),$(".zoomer").on("click",function(t){t.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),m.zoomIn()):($(this).addClass("active"),m.zoomOut())})});