var config={text_idle_fill_color:"rgba(0, 0, 0, 1)",shape_idle_fill_color:"rgba(0, 0, 0, 0)",selected_color:"rgba(240, 0, 0, 1)",hover_color:"rgba(200, 0, 0, 1)",hover_selected_color:"rgba(220, 0, 0, 1)",bar_width:7,bar_height:7,bar_width_selected:7,bar_height_selected:7,end_width:19,end_height:7,end_width_selected:19,end_height_selected:7,circle_radius:7,circle_stroke_width:5,circle_stroke_width_selected:5},SMap=function(o){function t(){s.options.onLoad()}function n(){u=Snap(s.options.selector),Snap.load(s.options.map_svg,function(o){u.append(o),a(function(){u.zpd({zoom:!1,pan:!0,drag:!1}),i(function(){t()})})})}function i(o){o&&o()}function e(o){c.push(new SStation(u,o,{onMouseOver:function(o){s.options.onStationMouseOver(o)},onMouseOut:function(o){s.options.onStationMouseOut(o)},onSelect:function(o){s.options.onStationSelect(o)},onUnselect:function(o){s.options.onStationUnselect(o)},onClick:function(o){s.options.onStationClick(o)}},s))}function a(o){$.ajax({url:s.options.data_url,type:"get",dataType:"json",success:function(t){for(var n=0;n<t.length;n++)e(t[n]);o&&o()}})}var s=this,c=[];this.options=$.extend({selector:"",map_svg:"",data_url:"",min_zoom:.75,max_zoom:1,zoom_animation_time:500,onLoad:function(){},onStationClick:function(o){},onStationMouseOver:function(o){},onStationMouseOut:function(o){},onStationSelect:function(o){},onStationUnselect:function(o){}},o);var r=$(this.options.selector),u=null;this.zoomOut=function(o){u.zoomTo(this.options.max_zoom,o?0:this.options.zoom_animation_time,mina.easeinout)},this.zoomIn=function(o){u.zoomTo(this.options.min_zoom,o?0:this.options.zoom_animation_time,mina.easeinout)},this.getStations=function(){return c},this.stationsConv=function(){for(var o=[],t=0;t<c.length;t++){var n=c[t].getData();"bar"==n.type&&(n.x=n.x-2,n.y=n.y-2),o.push(n)}console.log(JSON.stringify(o))},this.getStationById=function(o){for(var t=0;t<c.length;t++){var n=c[t];if(n.getData().id==o)return n}},this.init=function(){n()}};