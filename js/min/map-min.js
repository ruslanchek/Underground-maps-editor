var config={text_idle_fill_color:"rgba(0, 0, 0, 1)",shape_idle_fill_color:"rgba(0, 0, 0, 0)",selected_color:"rgba(240, 0, 0, 1)",hover_color:"rgba(200, 0, 0, 1)",hover_selected_color:"rgba(220, 0, 0, 1)",bar_width:7,bar_height:7,bar_width_selected:7,bar_height_selected:7,end_width:21,end_height:7,end_width_selected:21,end_height_selected:7,circle_radius:7,circle_stroke_width:5,circle_stroke_width_selected:5},SMap=function(o){function t(){l=Snap(a.options.selector),Snap.load(a.options.map_svg,function(o){l.append(o),e(function(){l.zpd({zoom:!1,pan:!0,drag:!1}),n(function(){a.options.onLoad()})})})}function n(o){o&&o()}function i(o){c.push(new SStation(l,o,{on_click_enabled:a.options.station_on_click_enabled,onMouseOver:function(o){a.options.onStationMouseOver(o,l)},onMouseOut:function(o){a.options.onStationMouseOut(o,l)},onSelect:function(o){a.options.onStationSelect(o,l)},onUnselect:function(o){a.options.onStationUnselect(o,l)},onClick:function(o){a.options.onStationClick(o,l)},onDblClick:function(o){a.options.onStationDblClick(o,l)}},a))}function e(o){$.ajax({url:a.options.data_url,type:"get",dataType:"json",success:function(t){for(var n=0;n<t.length;n++)i(t[n]);o&&o()}})}var a=this,c=[];this.options=$.extend({selector:"",map_svg:"",data_url:"",min_zoom:.75,max_zoom:1,zoom_animation_time:500,station_on_click_enabled:!0,onLoad:function(){},onStationClick:function(o,t){},onStationMouseOver:function(o,t){},onStationMouseOut:function(o,t){},onStationSelect:function(o,t){},onStationUnselect:function(o,t){}},o);var s=$(this.options.selector),l=null;this.zoomOut=function(o){l.zoomTo(this.options.max_zoom,o?0:this.options.zoom_animation_time,mina.easeinout)},this.zoomIn=function(o){l.zoomTo(this.options.min_zoom,o?0:this.options.zoom_animation_time,mina.easeinout)},this.getStations=function(){return c},this.getStationById=function(o){for(var t=0;t<c.length;t++){var n=c[t];if(n.getData().id==o)return n}},this.unselectAllStations=function(){for(var o=0;o<c.length;o++)c[o].unselect()},this.iterateAllStations=function(o){for(var t=0;t<c.length;t++)o&&o(c[t])},this.init=function(){t()}};